<!DOCTYPE html>
<html>
<head>
  <title>W Platform</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    .post {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
    }
    .post img {
      max-width: 100%;
    }
    form {
      margin: 20px 0;
      padding: 15px;
      background: #f5f5f5;
      border-radius: 8px;
    }
    input, button {
      padding: 8px;
      margin: 5px;
    }
  </style>
</head>
<body>
  <h1>منصة W</h1>
  
  <!-- واجهة المستخدم -->
  <div id="app">
    <form id="postForm">
      <input type="text" id="username" placeholder="اسم المستخدم" required>
      <input type="file" id="image" accept="image/*" required>
      <button type="submit">نشر</button>
    </form>
    
    <div id="posts"></div>
  </div>

  <!-- خادم محلي مبسط -->
  <script>
    // ============ Backend Simulator ============
    let posts = [
      { id: 1, user: "Ahmed", image: "data:image/png;base64,...", likes: 0 }
    ];

    // ============ Frontend ============
    document.getElementById('postForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const username = document.getElementById('username').value;
      const file = document.getElementById('image').files[0];
      
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = function(e) {
        const newPost = {
          id: posts.length + 1,
          user: username || "مجهول",
          image: e.target.result,
          likes: 0
        };
        posts.push(newPost);
        renderPosts();
      };
      reader.readAsDataURL(file);
    });

    function renderPosts() {
      const postsContainer = document.getElementById('posts');
      postsContainer.innerHTML = '';
      
      posts.forEach(post => {
        const postEl = document.createElement('div');
        postEl.className = 'post';
        postEl.innerHTML = `
          <img src="${post.image}" alt="صورة ${post.user}">
          <p>بواسطة: ${post.user}</p>
          <p>الإعجابات: ${post.likes}</p>
          <button onclick="likePost(${post.id})">إعجاب</button>
        `;
        postsContainer.appendChild(postEl);
      });
    }

    function likePost(postId) {
      const post = posts.find(p => p.id === postId);
      if (post) post.likes++;
      renderPosts();
    }

    // التحميل الأولي
    renderPosts();
  </script>
</body>
</html>
